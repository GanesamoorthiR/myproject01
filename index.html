<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MiniCommerce — Single File E‑commerce</title>
  <style>
    /* Reset-ish */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;line-height:1.4;color:#111;background:#f6f7fb}

    /* Layout */
    .container{max-width:1120px;margin:28px auto;padding:20px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:46px;height:46px;border-radius:8px;background:linear-gradient(135deg,#4f46e5,#06b6d4);display:flex;align-items:center;justify-content:center;color:white;font-weight:700}
    h1{font-size:18px}

    /* Search & actions */
    .actions{display:flex;gap:12px;align-items:center}
    .search{display:flex;align-items:center;background:white;padding:8px;border-radius:10px;box-shadow:0 2px 6px rgba(20,20,40,0.04)}
    .search input{border:0;outline:none;width:220px}
    .btn{background:#111827;color:#fff;border:0;padding:10px 12px;border-radius:8px;cursor:pointer}
    .btn.secondary{background:#fff;color:#111;border:1px solid #e6e9ef}

    /* Main grid */
    .main{display:grid;grid-template-columns:1fr 320px;gap:18px}
    .catalog{background:white;padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
    .filters{display:flex;gap:8px;margin-bottom:14px}
    .filter{padding:6px 8px;border-radius:8px;border:1px solid #eef2ff;background:#fff;font-size:13px}

    .products{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.98),#fff);padding:12px;border-radius:10px;border:1px solid #f0f3f8}
    .thumb{height:140px;border-radius:8px;display:flex;align-items:center;justify-content:center;background:#f3f6fb;overflow:hidden}
    .thumb img{width:100%;height:100%;object-fit:cover}
    .meta{padding-top:8px}
    .title{font-size:14px;font-weight:600}
    .price{margin-top:6px;font-weight:700;color:#0f172a}
    .prod-actions{display:flex;gap:8px;margin-top:10px}

    /* Cart */
    .cart{background:linear-gradient(180deg,#fff,#fbfdff);padding:16px;border-radius:12px;border:1px solid #e8eef8;position:sticky;top:20px;height:fit-content}
    .cart h3{margin-bottom:10px}
    .cart-list{display:flex;flex-direction:column;gap:10px;max-height:360px;overflow:auto;padding-right:6px}
    .cart-item{display:flex;gap:10px;align-items:center}
    .cart-item img{width:48px;height:48px;border-radius:6px;object-fit:cover}
    .qty-control{display:flex;gap:6px;align-items:center}
    .small{font-size:13px;color:#475569}
    .total-row{display:flex;justify-content:space-between;margin-top:12px;font-weight:700}

    /* Modal */
    .modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.5);display:flex;align-items:center;justify-content:center;padding:20px;z-index:50}
    .modal{background:white;padding:18px;border-radius:12px;max-width:780px;width:100%;box-shadow:0 20px 50px rgba(2,6,23,0.4)}
    .modal-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}

    /* Responsive */
    @media (max-width:900px){
      .main{grid-template-columns:1fr}
      .cart{position:static}
      .search input{width:140px}
      .modal-grid{grid-template-columns:1fr}
    }

    /* Tiny polish */
    .badge{background:#eef2ff;color:#3730a3;padding:6px 8px;border-radius:999px;font-weight:600;font-size:12px}
    footer{margin-top:18px;text-align:center;color:#475569;font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">MC</div>
        <div>
          <h1>MiniCommerce</h1>
          <div class="small">Demo single-file e-commerce template</div>
        </div>
      </div>

      <div class="actions">
        <div class="search">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="opacity:.6"><path d="M21 21l-4.35-4.35" stroke="#000" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          <input id="search" placeholder="Search products..." />
        </div>
        <button class="btn secondary" id="view-wishlist">Wishlist</button>
        <button class="btn" id="toggle-cart">Cart (<span id="cart-count">0</span>)</button>
      </div>
    </header>

    <main class="main">
      <section class="catalog">
        <div class="filters">
          <div class="filter">All</div>
          <div class="filter">Clothes</div>
          <div class="filter">Electronics</div>
          <div class="filter">Home</div>
          <div style="margin-left:auto" class="badge">Free shipping over ₹999</div>
        </div>

        <div class="products" id="products"></div>

        <div style="margin-top:14px;display:flex;justify-content:center">
          <button class="btn secondary" id="load-more">Load more</button>
        </div>
      </section>

      <aside class="cart" id="cart" aria-live="polite">
        <h3>Your Cart</h3>
        <div class="cart-list" id="cart-list">
          <div class="small">Cart is empty — add some goodies ✨</div>
        </div>
        <div class="total-row">
          <div class="small">Subtotal</div>
          <div id="subtotal">₹0</div>
        </div>
        <div style="margin-top:12px;display:flex;gap:8px">
          <button class="btn" id="checkout">Checkout</button>
          <button class="btn secondary" id="clear-cart">Clear</button>
        </div>
      </aside>
    </main>

    <footer>
      © MiniCommerce • Built with HTML/CSS/JS — single file demo
    </footer>
  </div>

  <!-- Product modal (hidden by default) -->
  <div id="modal-root" style="display:none"></div>

  <script>
    /* Sample product data (in a real app this comes from a server) */
    const PRODUCTS = [
      {id:1,title:'Organic Cotton T‑Shirt',price:499,category:'Clothes',img:'https://images.unsplash.com/photo-1520975912776-9b4a1a9e1b2d?auto=format&fit=crop&w=800&q=60'},
      {id:2,title:'Wireless Headphones',price:2499,category:'Electronics',img:'https://images.unsplash.com/photo-1518444028253-7f3d9f32b307?auto=format&fit=crop&w=800&q=60'},
      {id:3,title:'Ceramic Plant Pot',price:799,category:'Home',img:'https://images.unsplash.com/photo-1504198266288-1659872e6590?auto=format&fit=crop&w=800&q=60'},
      {id:4,title:'Classic Denim Jacket',price:2999,category:'Clothes',img:'https://images.unsplash.com/photo-1541099649105-f69ad21f3246?auto=format&fit=crop&w=800&q=60'},
      {id:5,title:'Bluetooth Speaker',price:1799,category:'Electronics',img:'https://images.unsplash.com/photo-1518444028253-7f3d9f32b307?auto=format&fit=crop&w=800&q=60'},
      {id:6,title:'Minimalist Wall Clock',price:1299,category:'Home',img:'https://images.unsplash.com/photo-1542831371-d531d36971e6?auto=format&fit=crop&w=800&q=60'},
      {id:7,title:'Yoga Mat',price:999,category:'Home',img:'https://images.unsplash.com/photo-1546484959-f7f8a0d60f4b?auto=format&fit=crop&w=800&q=60'},
      {id:8,title:'Slim Fit Chinos',price:1599,category:'Clothes',img:'https://images.unsplash.com/photo-1526178611968-2a99b6a6b1c2?auto=format&fit=crop&w=800&q=60'}
    ];

    /* Basic state */
    let catalog = [...PRODUCTS];
    let cart = {}; // id -> qty

    const productsEl = document.getElementById('products');
    const cartListEl = document.getElementById('cart-list');
    const subtotalEl = document.getElementById('subtotal');
    const cartCountEl = document.getElementById('cart-count');
    const modalRoot = document.getElementById('modal-root');

    function renderProducts(list){
      productsEl.innerHTML = '';
      list.forEach(p=>{
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `
          <div class="thumb"><img src="${p.img}" alt="${p.title}"></div>
          <div class="meta">
            <div class="title">${p.title}</div>
            <div class="small">${p.category}</div>
            <div class="price">₹${p.price.toLocaleString()}</div>
            <div class="prod-actions">
              <button class="btn" data-add="${p.id}">Add</button>
              <button class="btn secondary" data-view="${p.id}">Quick view</button>
            </div>
          </div>
        `;
        productsEl.appendChild(card);
      });
    }

    function openModal(product){
      modalRoot.style.display = 'block';
      modalRoot.innerHTML = `
        <div class="modal-backdrop" onclick="closeModal(event)">
          <div class="modal" onclick="event.stopPropagation()">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:8px">
              <strong>${product.title}</strong>
              <button class='btn secondary' onclick='closeModal()'>Close</button>
            </div>
            <div class="modal-grid">
              <div>
                <div style='height:260px;border-radius:8px;overflow:hidden;background:#f3f6fb;display:flex;align-items:center;justify-content:center'>
                  <img src="${product.img}" alt="${product.title}" style='width:100%;height:100%;object-fit:cover'>
                </div>
                <p class="small" style='margin-top:10px'>Category: ${product.category}</p>
                <p style='margin-top:8px;font-weight:700'>₹${product.price.toLocaleString()}</p>
              </div>
              <div>
                <h4>Product details</h4>
                <p class="small">This is a demo product card. Replace this text with real product descriptions, sizes, materials and shipping info for production use.</p>
                <div style='margin-top:12px'>
                  <label class='small'>Quantity</label>
                  <div style='margin-top:6px;display:flex;gap:8px;align-items:center'>
                    <input id='modal-qty' type='number' min='1' value='1' style='width:72px;padding:6px;border-radius:6px;border:1px solid #e6eef8'>
                    <button class='btn' onclick='modalAdd(${product.id})'>Add to cart</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }
    function closeModal(e){
      if(e && e.target && e.target.classList && e.target.classList.contains('modal-backdrop')){
        modalRoot.style.display = 'none';
        modalRoot.innerHTML = '';
      } else if(!e) {
        modalRoot.style.display = 'none';
        modalRoot.innerHTML = '';
      }
    }

    function modalAdd(id){
      const qty = Math.max(1, Number(document.getElementById('modal-qty').value || 1));
      addToCart(id,qty);
      closeModal();
    }

    function addToCart(id,qty=1){
      cart[id] = (cart[id]||0) + qty;
      renderCart();
      announce('Added to cart');
    }

    function removeFromCart(id){
      delete cart[id];
      renderCart();
    }

    function changeQty(id,qty){
      qty = Number(qty);
      if(qty <= 0) removeFromCart(id);
      else { cart[id] = qty; renderCart(); }
    }

    function renderCart(){
      const ids = Object.keys(cart).map(x=>Number(x));
      cartListEl.innerHTML = '';
      if(ids.length===0){
        cartListEl.innerHTML = '<div class="small">Cart is empty — add some goodies ✨</div>';
        subtotalEl.textContent = '₹0';
        cartCountEl.textContent = '0';
        return;
      }
      let total = 0;
      ids.forEach(id=>{
        const p = PRODUCTS.find(q=>q.id===id);
        const qty = cart[id];
        total += p.price * qty;
        const row = document.createElement('div');
        row.className = 'cart-item';
        row.innerHTML = `
          <img src="${p.img}" alt="${p.title}">
          <div style='flex:1'>
            <div style='font-weight:600'>${p.title}</div>
            <div class='small'>₹${p.price.toLocaleString()} x ${qty} = ₹${(p.price*qty).toLocaleString()}</div>
          </div>
          <div class='qty-control'>
            <input type='number' min='0' value='${qty}' style='width:56px;padding:6px;border-radius:6px;border:1px solid #e6eef8' data-qid='${id}'>
            <button class='btn secondary' data-rem='${id}'>Remove</button>
          </div>
        `;
        cartListEl.appendChild(row);
      });
      subtotalEl.textContent = '₹' + total.toLocaleString();
      cartCountEl.textContent = ids.reduce((a,b)=>a+cart[b],0);

      // wire qty inputs and remove buttons
      cartListEl.querySelectorAll('input[data-qid]').forEach(inp=>{
        inp.addEventListener('change',e=>{
          changeQty(Number(e.target.dataset.qid),e.target.value);
        });
      });
      cartListEl.querySelectorAll('button[data-rem]').forEach(btn=>{
        btn.addEventListener('click',e=>{
          removeFromCart(Number(e.target.dataset.rem));
        });
      });
    }

    function announce(msg){
      // lightweight toast using aria-live region (could be enhanced)
      const prev = document.getElementById('toast');
      if(prev) prev.remove();
      const t = document.createElement('div');
      t.id='toast';
      t.style.position='fixed';t.style.right='18px';t.style.bottom='18px';t.style.background='#111';t.style.color='#fff';t.style.padding='10px 12px';t.style.borderRadius='8px';t.style.zIndex=9999;t.textContent=msg;
      document.body.appendChild(t);
      setTimeout(()=>t.remove(),1500);
    }

    /* Events */
    document.addEventListener('click',e=>{
      if(e.target && e.target.dataset && e.target.dataset.add){
        addToCart(Number(e.target.dataset.add));
      }
      if(e.target && e.target.dataset && e.target.dataset.view){
        const p = PRODUCTS.find(x=>x.id===Number(e.target.dataset.view));
        openModal(p);
      }
      if(e.target && e.target.id === 'toggle-cart'){
        document.querySelector('.container').scrollIntoView({behavior:'smooth'});
        const cartBox = document.getElementById('cart');
        cartBox.classList.add('highlight');
        setTimeout(()=>cartBox.classList.remove('highlight'),800);
      }
    });

    document.getElementById('search').addEventListener('input',e=>{
      const q = e.target.value.trim().toLowerCase();
      const filtered = PRODUCTS.filter(p=>p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q));
      renderProducts(filtered);
    });

    document.getElementById('clear-cart').addEventListener('click',()=>{ cart = {}; renderCart(); announce('Cart cleared'); });
    document.getElementById('checkout').addEventListener('click',()=>{
      if(Object.keys(cart).length===0){ announce('Cart is empty'); return; }
      // demo checkout flow
      const total = Object.keys(cart).reduce((sum,id)=>{
        const p = PRODUCTS.find(x=>x.id===Number(id));
        return sum + p.price * cart[id];
      },0);
      alert('Checkout demo — Total: ₹' + total.toLocaleString() + '\nThis is a static demo.');
    });

    document.getElementById('load-more').addEventListener('click',()=>{
      // demo: duplicate existing products to simulate more
      const copy = PRODUCTS.map(p=>({...p,id:p.id+100*Math.random()}));
      catalog = catalog.concat(copy);
      renderProducts(catalog);
    });

    // initial render
    renderProducts(catalog);
    renderCart();

    // small accessibility helper: close modal with Escape
    document.addEventListener('keydown',e=>{
      if(e.key === 'Escape') closeModal();
    });

    // Very tiny persistence using localStorage
    window.addEventListener('beforeunload',()=>{
      try{ localStorage.setItem('mini_cart', JSON.stringify(cart)); }catch(e){}
    });
    // restore
    try{
      const saved = JSON.parse(localStorage.getItem('mini_cart')||'{}');
      if(Object.keys(saved).length) { cart = saved; renderCart(); }
    }catch(e){}

  </script>
</body>
</html>
